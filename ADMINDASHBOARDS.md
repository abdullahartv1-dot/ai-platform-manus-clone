# Ù„ÙˆØ­Ø§Øª Ø§Ù„ØªØ­ÙƒÙ… - Admin & Support Dashboards

## ğŸ¯ Ù…Ø§ Ù‡ÙŠ Ù„ÙˆØ­Ø§Øª Ø§Ù„ØªØ­ÙƒÙ…ØŸ

### 1. Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø§Ù„Ùƒ (Admin Dashboard)
- Ù„Ù„Ù…Ø§Ù„Ùƒ ÙÙ‚Ø·
- Ø¥Ø¯Ø§Ø±Ø© ÙƒØ§Ù…Ù„Ø© Ù„Ù„Ù…Ù†ØµØ©
- Ø¥Ø¶Ø§ÙØ© ÙˆØªØ¹Ø¯ÙŠÙ„ Ø¨Ø§Ù‚Ø§Øª Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª
- Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ ÙˆØ§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
- Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù†Ø¸Ø§Ù…

### 2. Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ (Support Dashboard)
- Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ
- ØªØ°Ø§ÙƒØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† (Tickets)
- Ø±ØµØ¯ Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª
- Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
- Ø­Ù„ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„

---

## 1ï¸âƒ£ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø§Ù„Ùƒ (Admin Dashboard)

### Ø§Ù„ØµÙØ­Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©:

#### ğŸ“Š Dashboard Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
**Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø¹Ø±ÙˆØ¶Ø©:**
- Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø¹Ø§Ù…Ø©:
  - Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ
  - Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ† Ø§Ù„Ù†Ø´Ø·ÙˆÙ† (DAU/MAU)
  - Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø§Ù„Ø´Ù‡Ø±ÙŠØ© (MRR)
  - Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø§Ù„Ø³Ù†ÙˆÙŠØ© (ARR)
  - Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø§Ø­ØªÙØ§Ø¸ (Retention Rate)
  - Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„ (Conversion Rate)
- Ø§Ù„Ù…Ø®Ø·Ø·Ø§Øª:
  - Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª (Ø¢Ø®Ø± 6 Ø£Ø´Ù‡Ø±)
  - Ù†Ù…Ùˆ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† (Ø¢Ø®Ø± 6 Ø£Ø´Ù‡Ø±)
  - Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© vs Ø§Ù„Ù…Ù„ØºØ§Ø©
  - ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù€ Plans
- Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª:
  - Ø¹Ø¯Ø¯ Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©
  - Ø¹Ø¯Ø¯ Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª Ø§Ù„Ù…ØªÙˆÙ‚ÙØ©
  - Ø§Ù„ØªÙƒÙ„ÙØ© Ø§Ù„Ø´Ù‡Ø±ÙŠØ© Ù„Ù„Ø³ÙŠØ±ÙØ±Ø§Øª
  - Hetzner usage (CPU, RAM, Disk)
- Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª:
  - Ø³ÙŠØ±ÙØ±Ø§Øª Ù…ØªÙˆÙ‚ÙØ© > 24 Ø³Ø§Ø¹Ø©
  - Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ† Ø¨Ù„Ù… ÙŠØªÙ… ØªØ³Ø¬ÙŠÙ„Ù‡Ù… > 7 Ø£ÙŠØ§Ù…
  - Ù†Ø³Ø® Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© ÙØ§Ø´Ù„Ø©
  - ÙÙˆØ§ØªÙŠØ± ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹Ø©

**Ø§Ù„ÙƒÙˆØ¯ (Frontend):**
```typescript
// app/admin/page.tsx
'use client';

import { useEffect, useState } from 'react';
import {
  Users,
  DollarSign,
  Activity,
  TrendingUp,
  Server,
  AlertTriangle
} from 'lucide-react';

export default function AdminDashboard() {
  const [stats, setStats] = useState({
    totalUsers: 0,
    activeUsers: 0,
    mrr: 0,
    arr: 0,
    retentionRate: 0,
    conversionRate: 0,
    activeServers: 0,
    stoppedServers: 0,
    serverCost: 0
  });

  const [alerts, setAlerts] = useState([]);

  useEffect(() => {
    fetchStats();
    fetchAlerts();
  }, []);

  const fetchStats = async () => {
    const response = await fetch('/api/admin/stats');
    const data = await response.json();
    setStats(data);
  };

  const fetchAlerts = async () => {
    const response = await fetch('/api/admin/alerts');
    const data = await response.json();
    setAlerts(data);
  };

  return (
    <div className="p-6">
      <h1 className="text-3xl font-bold mb-6">Admin Dashboard</h1>

      {/* Stats Cards */}
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
        <StatCard
          icon={<Users className="w-6 h-6" />}
          title="Total Users"
          value={stats.totalUsers}
          trend="+12%"
        />
        <StatCard
          icon={<DollarSign className="w-6 h-6" />}
          title="Monthly Revenue"
          value={`$${stats.mrr.toLocaleString()}`}
          trend="+18%"
        />
        <StatCard
          icon={<Activity className="w-6 h-6" />}
          title="Retention Rate"
          value={`${stats.retentionRate}%`}
          trend="+5%"
        />
        <StatCard
          icon={<TrendingUp className="w-6 h-6" />}
          title="Conversion Rate"
          value={`${stats.conversionRate}%`}
          trend="+2%"
        />
      </div>

      {/* Server Stats */}
      <div className="bg-white rounded-lg shadow p-6 mb-8">
        <h2 className="text-xl font-semibold mb-4">Server Status</h2>
        <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
          <div className="flex items-center space-x-3">
            <Server className="w-8 h-8 text-green-500" />
            <div>
              <p className="text-2xl font-bold">{stats.activeServers}</p>
              <p className="text-sm text-gray-500">Active Servers</p>
            </div>
          </div>
          <div className="flex items-center space-x-3">
            <Server className="w-8 h-8 text-yellow-500" />
            <div>
              <p className="text-2xl font-bold">{stats.stoppedServers}</p>
              <p className="text-sm text-gray-500">Stopped Servers</p>
            </div>
          </div>
          <div className="flex items-center space-x-3">
            <DollarSign className="w-8 h-8 text-blue-500" />
            <div>
              <p className="text-2xl font-bold">${stats.serverCost.toLocaleString()}</p>
              <p className="text-sm text-gray-500">Monthly Server Cost</p>
            </div>
          </div>
        </div>
      </div>

      {/* Alerts */}
      {alerts.length > 0 && (
        <div className="bg-yellow-50 border border-yellow-200 rounded-lg p-6 mb-8">
          <h2 className="text-xl font-semibold mb-4 flex items-center">
            <AlertTriangle className="w-6 h-6 mr-2 text-yellow-500" />
            Alerts
          </h2>
          <div className="space-y-2">
            {alerts.map((alert) => (
              <div key={alert.id} className="bg-white rounded p-4 shadow-sm">
                <p className="font-medium">{alert.message}</p>
                <p className="text-sm text-gray-500">{alert.time}</p>
              </div>
            ))}
          </div>
        </div>
      )}
    </div>
  );
}
```

---

#### ğŸ’° Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª (Subscription Plans)
**Ø§Ù„ÙˆØ¸Ø§Ø¦Ù:**
- Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©
- Ø¥Ø¶Ø§ÙØ© Ø§Ø´ØªØ±Ø§Ùƒ Ø¬Ø¯ÙŠØ¯
- ØªØ¹Ø¯ÙŠÙ„ Ø§Ø´ØªØ±Ø§Ùƒ Ù…ÙˆØ¬ÙˆØ¯
- Ø­Ø°Ù Ø§Ø´ØªØ±Ø§Ùƒ
- ØªÙØ¹ÙŠÙ„/ØªØ¹Ø·ÙŠÙ„ Ø§Ø´ØªØ±Ø§Ùƒ

**Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ù…ÙƒÙ†Ø©:**
```
- Plan Name: (Ù…Ø«Ø§Ù„: Starter, Pro, Enterprise)
- Plan Type: (free, monthly, yearly)
- Price: ($/month)
- Hetzner Server Type: (cx21, cx31, cx41, etc.)
- CPU Cores: (1, 2, 4, etc.)
- RAM: (4GB, 8GB, 16GB, etc.)
- Storage: (40GB, 80GB, 160GB, etc.)
- Bandwidth: (20TB, 40TB, etc.)
- Max Usage Hours: (10, 50, 200, unlimited)
- Max Projects: (1, 5, 10, unlimited)
- Backup Retention: (7 days, 30 days, 90 days, unlimited)
- Features: (list of features)
- Status: (active, inactive)
- Stripe Price ID: (for payment)
```

**Ø§Ù„ÙƒÙˆØ¯ (Frontend):**
```typescript
// app/admin/subscriptions/page.tsx
'use client';

import { useEffect, useState } from 'react';
import {
  Plus,
  Edit,
  Trash2,
  DollarSign,
  Server,
  Check,
  X
} from 'lucide-react';

export default function SubscriptionPlans() {
  const [plans, setPlans] = useState([]);
  const [showCreateModal, setShowCreateModal] = useState(false);
  const [editingPlan, setEditingPlan] = useState(null);

  useEffect(() => {
    fetchPlans();
  }, []);

  const fetchPlans = async () => {
    const response = await fetch('/api/admin/subscriptions');
    const data = await response.json();
    setPlans(data);
  };

  const createPlan = async (planData) => {
    const response = await fetch('/api/admin/subscriptions', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(planData)
    });
    await fetchPlans();
    setShowCreateModal(false);
  };

  const updatePlan = async (planId, planData) => {
    const response = await fetch(`/api/admin/subscriptions/${planId}`, {
      method: 'PUT',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(planData)
    });
    await fetchPlans();
    setEditingPlan(null);
  };

  const deletePlan = async (planId) => {
    if (!confirm('Are you sure you want to delete this plan?')) return;
    await fetch(`/api/admin/subscriptions/${planId}`, {
      method: 'DELETE'
    });
    await fetchPlans();
  };

  return (
    <div className="p-6">
      <div className="flex justify-between items-center mb-6">
        <h1 className="text-3xl font-bold">Subscription Plans</h1>
        <button
          onClick={() => setShowCreateModal(true)}
          className="flex items-center space-x-2 bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600"
        >
          <Plus className="w-5 h-5" />
          <span>Add Plan</span>
        </button>
      </div>

      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {plans.map((plan) => (
          <PlanCard
            key={plan.id}
            plan={plan}
            onEdit={() => setEditingPlan(plan)}
            onDelete={() => deletePlan(plan.id)}
          />
        ))}
      </div>

      {showCreateModal && (
        <PlanModal
          mode="create"
          onSubmit={createPlan}
          onClose={() => setShowCreateModal(false)}
        />
      )}

      {editingPlan && (
        <PlanModal
          mode="edit"
          plan={editingPlan}
          onSubmit={(data) => updatePlan(editingPlan.id, data)}
          onClose={() => setEditingPlan(null)}
        />
      )}
    </div>
  );
}

function PlanCard({ plan, onEdit, onDelete }) {
  return (
    <div className="bg-white rounded-lg shadow p-6 relative">
      <div className="flex justify-between items-start mb-4">
        <div>
          <h3 className="text-2xl font-bold">{plan.name}</h3>
          <p className="text-3xl font-bold text-blue-600">
            ${plan.price}
            <span className="text-sm text-gray-500">/month</span>
          </p>
        </div>
        <span className={`px-3 py-1 rounded-full text-sm ${
          plan.status === 'active' ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'
        }`}>
          {plan.status}
        </span>
      </div>

      <div className="space-y-2 mb-6">
        <div className="flex items-center text-sm">
          <Server className="w-4 h-4 mr-2" />
          <span>
            {plan.serverSpecs.cpu} CPU, {plan.serverSpecs.ram} RAM
          </span>
        </div>
        <div className="flex items-center text-sm">
          <DollarSign className="w-4 h-4 mr-2" />
          <span>Max {plan.maxUsageHours} hours/month</span>
        </div>
      </div>

      <div className="space-y-1 mb-6">
        {plan.features.map((feature, index) => (
          <div key={index} className="flex items-center text-sm">
            <Check className="w-4 h-4 mr-2 text-green-500" />
            <span>{feature}</span>
          </div>
        ))}
      </div>

      <div className="flex space-x-2">
        <button
          onClick={onEdit}
          className="flex-1 flex items-center justify-center space-x-2 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"
        >
          <Edit className="w-4 h-4" />
          <span>Edit</span>
        </button>
        <button
          onClick={onDelete}
          className="flex-1 flex items-center justify-center space-x-2 bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"
        >
          <Trash2 className="w-4 h-4" />
          <span>Delete</span>
        </button>
      </div>
    </div>
  );
}
```

**Ø§Ù„ÙƒÙˆØ¯ (Backend API):**
```typescript
// routes/admin/subscriptions.ts
import { FastifyInstance, FastifyRequest, FastifyReply } from 'fastify';
import { prisma } from '../../lib/prisma';

export async function subscriptionRoutes(fastify: FastifyInstance) {
  // Get all plans
  fastify.get('/api/admin/subscriptions', async (request: FastifyRequest, reply: FastifyReply) => {
    const plans = await prisma.subscriptionPlan.findMany({
      orderBy: { price: 'asc' }
    });
    return plans;
  });

  // Create plan
  fastify.post('/api/admin/subscriptions', async (request: FastifyRequest, reply: FastifyReply) => {
    const data = request.body as any;

    const plan = await prisma.subscriptionPlan.create({
      data: {
        name: data.name,
        price: data.price,
        serverType: data.serverType,
        serverSpecs: {
          cpu: data.cpu,
          ram: data.ram,
          storage: data.storage,
          bandwidth: data.bandwidth
        },
        maxUsageHours: data.maxUsageHours,
        maxProjects: data.maxProjects,
        backupRetentionDays: data.backupRetentionDays,
        features: data.features,
        status: data.status || 'active',
        stripePriceId: data.stripePriceId
      }
    });

    return plan;
  });

  // Update plan
  fastify.put('/api/admin/subscriptions/:id', async (request: FastifyRequest, reply: FastifyReply) => {
    const { id } = request.params as { id: string };
    const data = request.body as any;

    const plan = await prisma.subscriptionPlan.update({
      where: { id },
      data: {
        name: data.name,
        price: data.price,
        serverType: data.serverType,
        serverSpecs: {
          cpu: data.cpu,
          ram: data.ram,
          storage: data.storage,
          bandwidth: data.bandwidth
        },
        maxUsageHours: data.maxUsageHours,
        maxProjects: data.maxProjects,
        backupRetentionDays: data.backupRetentionDays,
        features: data.features,
        status: data.status,
        stripePriceId: data.stripePriceId
      }
    });

    return plan;
  });

  // Delete plan
  fastify.delete('/api/admin/subscriptions/:id', async (request: FastifyRequest, reply: FastifyReply) => {
    const { id } = request.params as { id: string };

    // Check if any users are subscribed to this plan
    const users = await prisma.user.count({
      where: { plan: id }
    });

    if (users > 0) {
      return reply.status(400).send({
        error: 'Cannot delete plan with active subscribers'
      });
    }

    await prisma.subscriptionPlan.delete({
      where: { id }
    });

    return { success: true };
  });
}
```

**Database Schema:**
```prisma
model SubscriptionPlan {
  id                String   @id @default(cuid())
  name              String   // Starter, Pro, Enterprise
  price             Float    // $19, $49, $99
  planType          String   @default("monthly") // monthly, yearly
  serverType        String   // cx21, cx31, cx41

  // Server specs
  serverSpecs        Json     // { cpu: 2, ram: "8GB", storage: "80GB", bandwidth: "20TB" }

  // Limits
  maxUsageHours     Int      // 10, 50, 200, unlimited
  maxProjects       Int      // 1, 5, 10, unlimited
  backupRetentionDays Int    // 7, 30, 90, unlimited

  // Features
  features          String[] // list of features

  // Status
  status            String   @default("active") // active, inactive
  stripePriceId     String?  // Stripe price ID

  // Relations
  users             User[]

  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
}
```

---

#### ğŸ‘¥ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† (User Management)
**Ø§Ù„ÙˆØ¸Ø§Ø¦Ù:**
- Ø¹Ø±Ø¶ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
- Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„ØªØµÙÙŠØ©
- Ø¹Ø±Ø¶ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
- ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
- ØªØ¹Ù„ÙŠÙ‚/ØªÙØ¹ÙŠÙ„ Ø­Ø³Ø§Ø¨
- Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
- Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…

**Ø§Ù„ÙƒÙˆØ¯ (Frontend):**
```typescript
// app/admin/users/page.tsx
'use client';

import { useEffect, useState } from 'react';
import { Search, Filter, MoreVertical, Ban, Check, Mail, Server, Calendar } from 'lucide-react';

export default function UserManagement() {
  const [users, setUsers] = useState([]);
  const [searchQuery, setSearchQuery] = useState('');
  const [statusFilter, setStatusFilter] = useState('all');
  const [planFilter, setPlanFilter] = useState('all');
  const [selectedUser, setSelectedUser] = useState(null);

  useEffect(() => {
    fetchUsers();
  }, [searchQuery, statusFilter, planFilter]);

  const fetchUsers = async () => {
    const params = new URLSearchParams({
      search: searchQuery,
      status: statusFilter,
      plan: planFilter
    });
    const response = await fetch(`/api/admin/users?${params}`);
    const data = await response.json();
    setUsers(data);
  };

  const suspendUser = async (userId) => {
    if (!confirm('Are you sure you want to suspend this user?')) return;
    await fetch(`/api/admin/users/${userId}/suspend`, { method: 'POST' });
    await fetchUsers();
  };

  const activateUser = async (userId) => {
    await fetch(`/api/admin/users/${userId}/activate`, { method: 'POST' });
    await fetchUsers();
  };

  const deleteUser = async (userId) => {
    if (!confirm('Are you sure you want to delete this user? This cannot be undone!')) return;
    await fetch(`/api/admin/users/${userId}`, { method: 'DELETE' });
    await fetchUsers();
  };

  return (
    <div className="p-6">
      <h1 className="text-3xl font-bold mb-6">User Management</h1>

      {/* Filters */}
      <div className="bg-white rounded-lg shadow p-4 mb-6">
        <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
          <div className="relative">
            <Search className="w-5 h-5 absolute left-3 top-2.5 text-gray-400" />
            <input
              type="text"
              placeholder="Search users..."
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
              className="w-full pl-10 pr-4 py-2 border rounded-lg"
            />
          </div>
          <select
            value={statusFilter}
            onChange={(e) => setStatusFilter(e.target.value)}
            className="border rounded-lg px-4 py-2"
          >
            <option value="all">All Status</option>
            <option value="active">Active</option>
            <option value="suspended">Suspended</option>
            <option value="expired">Expired</option>
          </select>
          <select
            value={planFilter}
            onChange={(e) => setPlanFilter(e.target.value)}
            className="border rounded-lg px-4 py-2"
          >
            <option value="all">All Plans</option>
            <option value="free">Free</option>
            <option value="starter">Starter</option>
            <option value="pro">Pro</option>
            <option value="enterprise">Enterprise</option>
          </select>
          <div className="flex justify-end items-center">
            <span className="text-sm text-gray-500">{users.length} users found</span>
          </div>
        </div>
      </div>

      {/* Users Table */}
      <div className="bg-white rounded-lg shadow overflow-hidden">
        <table className="w-full">
          <thead className="bg-gray-50">
            <tr>
              <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">User</th>
              <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Plan</th>
              <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
              <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Server</th>
              <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Expiry</th>
              <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Last Active</th>
              <th className="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
            </tr>
          </thead>
          <tbody className="divide-y divide-gray-200">
            {users.map((user) => (
              <tr key={user.id} className="hover:bg-gray-50">
                <td className="px-6 py-4">
                  <div>
                    <p className="font-medium text-gray-900">{user.name || user.email}</p>
                    <p className="text-sm text-gray-500">{user.email}</p>
                  </div>
                </td>
                <td className="px-6 py-4">
                  <span className="px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                    {user.plan}
                  </span>
                </td>
                <td className="px-6 py-4">
                  <span className={`px-3 py-1 rounded-full text-xs font-medium ${
                    user.status === 'active' ? 'bg-green-100 text-green-800' :
                    user.status === 'suspended' ? 'bg-red-100 text-red-800' :
                    'bg-gray-100 text-gray-800'
                  }`}>
                    {user.status}
                  </span>
                </td>
                <td className="px-6 py-4">
                  {user.serverId ? (
                    <div>
                      <p className="text-sm font-medium">{user.serverIp}</p>
                      <p className="text-xs text-gray-500">{user.serverStatus}</p>
                    </div>
                  ) : (
                    <span className="text-gray-400">-</span>
                  )}
                </td>
                <td className="px-6 py-4 text-sm text-gray-900">
                  {user.subscriptionExpiresAt ? new Date(user.subscriptionExpiresAt).toLocaleDateString() : '-'}
                </td>
                <td className="px-6 py-4 text-sm text-gray-500">
                  {new Date(user.lastActiveAt).toLocaleDateString()}
                </td>
                <td className="px-6 py-4 text-right">
                  <div className="flex items-center justify-end space-x-2">
                    <button
                      onClick={() => setSelectedUser(user)}
                      className="p-2 hover:bg-gray-100 rounded"
                    >
                      <Mail className="w-4 h-4 text-gray-500" />
                    </button>
                    {user.status === 'active' && (
                      <button
                        onClick={() => suspendUser(user.id)}
                        className="p-2 hover:bg-gray-100 rounded"
                      >
                        <Ban className="w-4 h-4 text-red-500" />
                      </button>
                    )}
                    {(user.status === 'suspended' || user.status === 'expired') && (
                      <button
                        onClick={() => activateUser(user.id)}
                        className="p-2 hover:bg-gray-100 rounded"
                      >
                        <Check className="w-4 h-4 text-green-500" />
                      </button>
                    )}
                    <button
                      onClick={() => deleteUser(user.id)}
                      className="p-2 hover:bg-gray-100 rounded"
                    >
                      <MoreVertical className="w-4 h-4 text-gray-500" />
                    </button>
                  </div>
                </td>
              </tr>
            ))}
          </tbody>
        </table>
      </div>

      {selectedUser && (
        <UserDetailModal
          user={selectedUser}
          onClose={() => setSelectedUser(null)}
        />
      )}
    </div>
  );
}
```

---

#### ğŸ’³ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙÙˆØªØ±Ø© (Billing Management)
**Ø§Ù„ÙˆØ¸Ø§Ø¦Ù:**
- Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙÙˆØ§ØªÙŠØ±
- ØªØµÙÙŠØ© Ø§Ù„ÙÙˆØ§ØªÙŠØ± (Ù…Ø¯ÙÙˆØ¹Ø©/ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹Ø©/ÙØ§Ø´Ù„Ø©)
- Ø¹Ø±Ø¶ ØªÙØ§ØµÙŠÙ„ Ø§Ù„ÙØ§ØªÙˆØ±Ø©
- Ø¥Ø¹Ø§Ø¯Ø© Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙØ§ØªÙˆØ±Ø©
- ØªØ¹Ø¯ÙŠÙ„ Ø­Ø§Ù„Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©
- ØªØµØ¯ÙŠØ± Ø§Ù„ÙÙˆØ§ØªÙŠØ± (CSV/PDF)

---

#### ğŸ”§ Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù†Ø¸Ø§Ù… (System Settings)
**Ø§Ù„ÙˆØ¸Ø§Ø¦Ù:**
- Ø¥Ø¹Ø¯Ø§Ø¯ Hetzner API Key
- Ø¥Ø¹Ø¯Ø§Ø¯ Stripe API Keys
- Ø¥Ø¹Ø¯Ø§Ø¯ Email Service (Resend)
- Ø¥Ø¹Ø¯Ø§Ø¯ S3/MinIO Ù„Ù„Ù€ backups
- Ø¥Ø¹Ø¯Ø§Ø¯ Cron jobs
- Ø¥Ø¯Ø§Ø±Ø© Admins (Ø¥Ø¶Ø§ÙØ©/Ø­Ø°Ù Ù…Ø³ØªØ®Ø¯Ù…ÙŠ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…)
- Logs ÙˆØ§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø©
- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø£Ù…Ø§Ù†

---

## 2ï¸âƒ£ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ (Support Dashboard)

### Ø§Ù„ØµÙØ­Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©:

#### ğŸ“‹ ØªØ°Ø§ÙƒØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† (Support Tickets)
**Ø§Ù„ÙˆØ¸Ø§Ø¦Ù:**
- Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØ°Ø§ÙƒØ±
- ØªØµÙÙŠØ© Ø§Ù„ØªØ°Ø§ÙƒØ± (open/in-progress/closed)
- Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„ØªØ°Ø§ÙƒØ±
- Ø¹Ø±Ø¶ ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØªØ°ÙƒØ±Ø©
- Ø§Ù„Ø±Ø¯ Ø¹Ù„Ù‰ Ø§Ù„ØªØ°ÙƒØ±Ø©
- ØªØºÙŠÙŠØ± Ø­Ø§Ù„Ø© Ø§Ù„ØªØ°ÙƒØ±Ø©
- ØªØ¹ÙŠÙŠÙ† Ø§Ù„ØªØ°ÙƒØ±Ø© Ø¥Ù„Ù‰ Ù…ÙˆØ¸Ù
- Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…

**Database Schema:**
```prisma
model SupportTicket {
  id                String   @id @default(cuid())
  userId            String
  user              User     @relation(fields: [userId], references: [id])

  // Ticket info
  subject           String
  message           String
  category          String   // server, billing, account, other
  priority          String   @default("normal") // low, normal, high, urgent
  status            String   @default("open") // open, in_progress, closed

  // Assignment
  assignedTo        String?  // Admin user ID
  assignedToName    String?

  // Metadata
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt

  // Relations
  messages          TicketMessage[]

  @@index([userId])
  @@index([status])
  @@index([category])
}

model TicketMessage {
  id                String   @id @default(cuid())
  ticketId          String
  ticket            SupportTicket @relation(fields: [ticketId], references: [id])

  // Message info
  senderId          String   // User or Admin ID
  senderType        String   // user, admin
  message           String

  // Metadata
  createdAt         DateTime @default(now())

  @@index([ticketId])
}
```

**Ø§Ù„ÙƒÙˆØ¯ (Frontend):**
```typescript
// app/support/tickets/page.tsx
'use client';

import { useEffect, useState } from 'react';
import { MessageSquare, Clock, AlertCircle, CheckCircle, User } from 'lucide-react';

export default function SupportTickets() {
  const [tickets, setTickets] = useState([]);
  const [selectedTicket, setSelectedTicket] = useState(null);
  const [statusFilter, setStatusFilter] = useState('all');

  useEffect(() => {
    fetchTickets();
  }, [statusFilter]);

  const fetchTickets = async () => {
    const params = new URLSearchParams({ status: statusFilter });
    const response = await fetch(`/api/support/tickets?${params}`);
    const data = await response.json();
    setTickets(data);
  };

  const updateTicketStatus = async (ticketId, newStatus) => {
    await fetch(`/api/support/tickets/${ticketId}`, {
      method: 'PUT',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ status: newStatus })
    });
    await fetchTickets();
  };

  const replyToTicket = async (ticketId, message) => {
    await fetch(`/api/support/tickets/${ticketId}/messages`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ message })
    });
    await fetchTickets();
  };

  return (
    <div className="p-6">
      <h1 className="text-3xl font-bold mb-6">Support Tickets</h1>

      {/* Filters */}
      <div className="bg-white rounded-lg shadow p-4 mb-6">
        <div className="flex space-x-4">
          <button
            onClick={() => setStatusFilter('all')}
            className={`px-4 py-2 rounded ${statusFilter === 'all' ? 'bg-blue-500 text-white' : 'bg-gray-100'}`}
          >
            All ({tickets.length})
          </button>
          <button
            onClick={() => setStatusFilter('open')}
            className={`px-4 py-2 rounded ${statusFilter === 'open' ? 'bg-blue-500 text-white' : 'bg-gray-100'}`}
          >
            Open ({tickets.filter(t => t.status === 'open').length})
          </button>
          <button
            onClick={() => setStatusFilter('in_progress')}
            className={`px-4 py-2 rounded ${statusFilter === 'in_progress' ? 'bg-blue-500 text-white' : 'bg-gray-100'}`}
          >
            In Progress ({tickets.filter(t => t.status === 'in_progress').length})
          </button>
          <button
            onClick={() => setStatusFilter('closed')}
            className={`px-4 py-2 rounded ${statusFilter === 'closed' ? 'bg-blue-500 text-white' : 'bg-gray-100'}`}
          >
            Closed ({tickets.filter(t => t.status === 'closed').length})
          </button>
        </div>
      </div>

      {/* Tickets List */}
      <div className="grid grid-cols-1 gap-4">
        {tickets.map((ticket) => (
          <TicketCard
            key={ticket.id}
            ticket={ticket}
            onClick={() => setSelectedTicket(ticket)}
            onStatusChange={(newStatus) => updateTicketStatus(ticket.id, newStatus)}
          />
        ))}
      </div>

      {selectedTicket && (
        <TicketDetailModal
          ticket={selectedTicket}
          onClose={() => setSelectedTicket(null)}
          onReply={(message) => replyToTicket(selectedTicket.id, message)}
        />
      )}
    </div>
  );
}

function TicketCard({ ticket, onClick, onStatusChange }) {
  const getStatusIcon = (status) => {
    switch (status) {
      case 'open': return <AlertCircle className="w-5 h-5 text-orange-500" />;
      case 'in_progress': return <Clock className="w-5 h-5 text-blue-500" />;
      case 'closed': return <CheckCircle className="w-5 h-5 text-green-500" />;
    }
  };

  return (
    <div
      onClick={onClick}
      className="bg-white rounded-lg shadow p-6 cursor-pointer hover:shadow-md transition-shadow"
    >
      <div className="flex justify-between items-start mb-4">
        <div className="flex items-center space-x-3">
          {getStatusIcon(ticket.status)}
          <div>
            <h3 className="font-semibold text-lg">{ticket.subject}</h3>
            <p className="text-sm text-gray-500">from {ticket.user.email}</p>
          </div>
        </div>
        <span className={`px-3 py-1 rounded-full text-xs font-medium ${
          ticket.priority === 'urgent' ? 'bg-red-100 text-red-800' :
          ticket.priority === 'high' ? 'bg-orange-100 text-orange-800' :
          'bg-gray-100 text-gray-800'
        }`}>
          {ticket.priority}
        </span>
      </div>

      <p className="text-gray-700 mb-4 line-clamp-2">{ticket.message}</p>

      <div className="flex justify-between items-center">
        <span className="text-sm text-gray-500">
          {new Date(ticket.createdAt).toLocaleDateString()} at {new Date(ticket.createdAt).toLocaleTimeString()}
        </span>
        <select
          value={ticket.status}
          onChange={(e) => onStatusChange(e.target.value)}
          className="border rounded px-2 py-1 text-sm"
          onClick={(e) => e.stopPropagation()}
        >
          <option value="open">Open</option>
          <option value="in_progress">In Progress</option>
          <option value="closed">Closed</option>
        </select>
      </div>
    </div>
  );
}
```

---

#### ğŸ–¥ï¸ Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª (Server Monitoring)
**Ø§Ù„ÙˆØ¸Ø§Ø¦Ù:**
- Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª
- Ø­Ø§Ù„Ø© ÙƒÙ„ Ø³ÙŠØ±ÙØ± (running/stopped/error)
- Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø³ÙŠØ±ÙØ± (CPU, RAM, Disk)
- Ø³Ø¬Ù„ Ø§Ù„Ø£Ø­Ø¯Ø§Ø« (Event logs)
- Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„Ø³ÙŠØ±ÙØ±
- ÙØªØ­ SSH connection
- Ø¹Ø±Ø¶ logs Ø§Ù„Ø³ÙŠØ±ÙØ±

---

#### ğŸ“Š ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø£Ø¯Ø§Ø¡ (Performance Analytics)
**Ø§Ù„ÙˆØ¸Ø§Ø¦Ù:**
- Ù…Ø¹Ø¯Ù„ Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª
- Ù…Ø¹Ø¯Ù„ Ø§Ø³ØªØ¬Ø§Ø¨Ø© API
- Ù…Ø¹Ø¯Ù„ Ù†Ø¬Ø§Ø­ Ø§Ù„Ù€ backups
- Ù…Ø¹Ø¯Ù„ ÙØ´Ù„ Ø§Ù„Ø¯ÙØ¹Ø§Øª
- Ù†Ù…Ùˆ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
- Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø¯Ø¹Ù… (Ù…ØªÙˆØ³Ø· ÙˆÙ‚Øª Ø§Ù„Ø±Ø¯ØŒ Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ØªØ°Ø§ÙƒØ±)

---

## ğŸ” Ø§Ù„Ø£Ù…Ø§Ù† ÙˆØ§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª

### ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ø§Ù„Ùƒ (Admin):
- âœ… Ø¬Ù…ÙŠØ¹ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª
- âœ… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª
- âœ… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
- âœ… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¯Ø¹Ù…
- âœ… Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù†Ø¸Ø§Ù…
- âœ… Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Logs ÙˆØ§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

### ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ø¯Ø¹Ù… (Support):
- âœ… Ø¹Ø±Ø¶ ÙˆØ¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªØ°Ø§ÙƒØ±
- âœ… Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
- âœ… Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª
- âœ… Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
- âŒ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª
- âŒ Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù†Ø¸Ø§Ù…
- âŒ Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ©

---

## ğŸ“‹ Ø®Ø·Ø© Ø§Ù„ØªÙ†ÙÙŠØ°

### Phase 1: Admin Dashboard Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ (Week 1-2)
- [ ] ØµÙØ­Ø© Dashboard Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
- [ ] Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª ÙˆÙ…Ø®Ø·Ø·Ø§Øª
- [ ] Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª

### Phase 2: Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª (Week 2-3)
- [ ] Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª
- [ ] Ø¥Ø¶Ø§ÙØ©/ØªØ¹Ø¯ÙŠÙ„/Ø­Ø°Ù Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª
- [ ] Ø±Ø¨Ø· Ù…Ø¹ Stripe

### Phase 3: Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† (Week 3)
- [ ] Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
- [ ] Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„ØªØµÙÙŠØ©
- [ ] ØªØ¹Ù„ÙŠÙ‚/ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
- [ ] Ø¹Ø±Ø¶ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…

### Phase 4: Ù„ÙˆØ­Ø© Ø§Ù„Ø¯Ø¹Ù… (Week 3-4)
- [ ] Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ°Ø§ÙƒØ±
- [ ] Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª
- [ ] ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø£Ø¯Ø§Ø¡

### Phase 5: Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù†Ø¸Ø§Ù… (Week 4)
- [ ] Ø¥Ø¹Ø¯Ø§Ø¯ API Keys
- [ ] Ø¥Ø¯Ø§Ø±Ø© Admins
- [ ] Logs ÙˆØ§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø©

---

## âœ… Action Items

### ÙÙˆØ±Ø§Ù‹:
1. â³ Ù‡Ù„ ØªØ±ÙŠØ¯ Ø£Ù† Ø£Ø¨Ø¯Ø£ Ø¨Ø¨Ù†Ø§Ø¡ Dashboard Ø§Ù„Ù…Ø§Ù„ÙƒØŸ
2. â³ Ø£Ù… ØªÙØ¶Ù„ Ø§Ù„Ø¨Ø¯Ø¡ Ø¨Ù„ÙˆØ­Ø© Ø§Ù„Ø¯Ø¹Ù…ØŸ
3. â³ Ø£Ù… ØªØ±ÙŠØ¯ Ø¥Ø¹Ø¯Ø§Ø¯ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø£ÙˆÙ„Ø§Ù‹ (Admin/Support tables)ØŸ

### Ø£Ù†Ø§ Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¨Ø¯Ø¡! ğŸš€

---

*ØªÙ… Ø¥Ù†Ø´Ø§Ø¤Ù‡ Ø¨ÙˆØ§Ø³Ø·Ø© ØµØ§Ù„Ø­ ğŸš€*
